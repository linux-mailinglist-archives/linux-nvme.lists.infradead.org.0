Return-Path: <linux-nvme-bounces+lists+linux-nvme=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-nvme@lfdr.de
Delivered-To: lists+linux-nvme@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 806111FF5DB
	for <lists+linux-nvme@lfdr.de>; Thu, 18 Jun 2020 16:55:39 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=Awh8+6Xn9dmTC03HvkRplFUSadLnKfwiBxx2SOSdf3o=; b=pgubB8kqA/D4xO
	Qnx9dFXCRyrolU18YbGVSNDH9xNn3OFS4Ot6a+fUd2gJQuN+xpd8MbTqor8kGyzJ8Rudi2ORANRVc
	qMfpWWpZNSnGMQ6ssT8hOU89OH4E67st4D0gVWane8FXwwxSpSKCysdDoF2RTEOvimFMDf7TCI952
	alO1RmPe3vem6UT3hoRONYnAamG5pZGx1qmEL49fmUsWU1GBYEzavxtkK4OmisvtHHMIaukoXXDkB
	Dy8+zmAis3eWm7UnL0//D9BmeTj/hzvvW9TQscdyFn/omzRUfe3ewPIpeoeZ35qSBk+KxWrLI8glW
	yLhz7caAEI/R3ns12VmA==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1jlvww-0006Gj-4q; Thu, 18 Jun 2020 14:55:30 +0000
Received: from mail.kernel.org ([198.145.29.99])
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1jlvve-0003Tf-0j
 for linux-nvme@lists.infradead.org; Thu, 18 Jun 2020 14:54:13 +0000
Received: from dhcp-10-100-145-180.wdl.wdc.com (unknown [199.255.45.60])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 74B9B208B3;
 Thu, 18 Jun 2020 14:54:08 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1592492049;
 bh=OV+y07xPypWNqkS7VfpwEmHhlmBWYGWAfCTr4f4JAoc=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=J689i7Wn1NhxQzY4hQDzWWKEeVnrjL7Ll1hHxXnPazzORfRxXPAvW7OTEiBq6NnIk
 +7jhPr6FaTKo6NeQbB/rqk4U3VXJzwEMlMPBiyYoylB9xBbtVc1Qa0JqIYr14E9ksK
 pmJ4TGtwPPXjt9CDlS+fJB+ktbmxMaypnbktKiVo=
From: Keith Busch <kbusch@kernel.org>
To: linux-nvme@lists.infradead.org, linux-block@vger.kernel.org, hch@lst.de,
 sagi@grimberg.me
Subject: [PATCHv2 5/5] nvme: support for zoned namespaces
Date: Thu, 18 Jun 2020 07:53:54 -0700
Message-Id: <20200618145354.1139350-6-kbusch@kernel.org>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200618145354.1139350-1-kbusch@kernel.org>
References: <20200618145354.1139350-1-kbusch@kernel.org>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20200618_075410_170839_B0EE1850 
X-CRM114-Status: GOOD (  22.59  )
X-Spam-Score: -5.2 (-----)
X-Spam-Report: SpamAssassin version 3.4.4 on bombadil.infradead.org summary:
 Content analysis details:   (-5.2 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -5.0 RCVD_IN_DNSWL_HI       RBL: Sender listed at https://www.dnswl.org/,
 high trust [198.145.29.99 listed in list.dnswl.org]
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 -0.0 DKIMWL_WL_HIGH         DKIMwl.org - Whitelisted High sender
X-BeenThere: linux-nvme@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-nvme.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-nvme>,
 <mailto:linux-nvme-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-nvme/>
List-Post: <mailto:linux-nvme@lists.infradead.org>
List-Help: <mailto:linux-nvme-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-nvme>,
 <mailto:linux-nvme-request@lists.infradead.org?subject=subscribe>
Cc: axboe@kernel.dk, Niklas Cassel <niklas.cassel@wdc.com>,
 Damien Le Moal <damien.lemoal@wdc.com>, Ajay Joshi <ajay.joshi@wdc.com>,
 Keith Busch <keith.busch@wdc.com>,
 "Martin K . Petersen" <martin.petersen@oracle.com>,
 Dmitry Fomichev <dmitry.fomichev@wdc.com>,
 Aravind Ramesh <aravind.ramesh@wdc.com>, Hans Holmberg <hans.holmberg@wdc.com>,
 =?UTF-8?q?Matias=20Bj=C3=B8rling?= <matias.bjorling@wdc.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "linux-nvme" <linux-nvme-bounces@lists.infradead.org>
Errors-To: linux-nvme-bounces+lists+linux-nvme=lfdr.de@lists.infradead.org

RnJvbTogS2VpdGggQnVzY2ggPGtlaXRoLmJ1c2NoQHdkYy5jb20+CgpBZGQgc3VwcG9ydCBmb3Ig
TlZNIEV4cHJlc3MgWm9uZWQgTmFtZXNwYWNlcyAoWk5TKSBDb21tYW5kIFNldCBkZWZpbmVkCmlu
IE5WTSBFeHByZXNzIFRQNDA1My4gWm9uZWQgbmFtZXNwYWNlcyBhcmUgZGlzY292ZXJlZCBiYXNl
ZCBvbiB0aGVpcgpDb21tYW5kIFNldCBJZGVudGlmaWVyIHJlcG9ydGVkIGluIHRoZSBuYW1lc3Bh
Y2VzIE5hbWVzcGFjZQpJZGVudGlmaWNhdGlvbiBEZXNjcmlwdG9yIGxpc3QuIEEgc3VjY2Vzc2Z1
bGx5IGRpc2NvdmVyZWQgWm9uZWQKTmFtZXNwYWNlIHdpbGwgYmUgcmVnaXN0ZXJlZCB3aXRoIHRo
ZSBibG9jayBsYXllciBhcyBhIGhvc3QgbWFuYWdlZAp6b25lZCBibG9jayBkZXZpY2Ugd2l0aCBa
b25lIEFwcGVuZCBjb21tYW5kIHN1cHBvcnQuIEEgbmFtZXNwYWNlIHRoYXQKZG9lcyBub3Qgc3Vw
cG9ydCBhcHBlbmQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgZHJpdmVyLgoKUmV2aWV3ZWQtYnk6
IE1hcnRpbiBLLiBQZXRlcnNlbiA8bWFydGluLnBldGVyc2VuQG9yYWNsZS5jb20+ClNpZ25lZC1v
ZmYtYnk6IEhhbnMgSG9sbWJlcmcgPGhhbnMuaG9sbWJlcmdAd2RjLmNvbT4KU2lnbmVkLW9mZi1i
eTogRG1pdHJ5IEZvbWljaGV2IDxkbWl0cnkuZm9taWNoZXZAd2RjLmNvbT4KU2lnbmVkLW9mZi1i
eTogQWpheSBKb3NoaSA8YWpheS5qb3NoaUB3ZGMuY29tPgpTaWduZWQtb2ZmLWJ5OiBBcmF2aW5k
IFJhbWVzaCA8YXJhdmluZC5yYW1lc2hAd2RjLmNvbT4KU2lnbmVkLW9mZi1ieTogTmlrbGFzIENh
c3NlbCA8bmlrbGFzLmNhc3NlbEB3ZGMuY29tPgpTaWduZWQtb2ZmLWJ5OiBNYXRpYXMgQmrDuHJs
aW5nIDxtYXRpYXMuYmpvcmxpbmdAd2RjLmNvbT4KU2lnbmVkLW9mZi1ieTogRGFtaWVuIExlIE1v
YWwgPGRhbWllbi5sZW1vYWxAd2RjLmNvbT4KU2lnbmVkLW9mZi1ieTogS2VpdGggQnVzY2ggPGtl
aXRoLmJ1c2NoQHdkYy5jb20+Ci0tLQogYmxvY2svS2NvbmZpZyAgICAgICAgICAgICAgfCAgIDUg
Ky0KIGRyaXZlcnMvbnZtZS9ob3N0L01ha2VmaWxlIHwgICAxICsKIGRyaXZlcnMvbnZtZS9ob3N0
L2NvcmUuYyAgIHwgIDkxICsrKysrKysrKysrKy0tCiBkcml2ZXJzL252bWUvaG9zdC9udm1lLmgg
ICB8ICAzOSArKysrKysKIGRyaXZlcnMvbnZtZS9ob3N0L3pucy5jICAgIHwgMjM4ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGluY2x1ZGUvbGludXgvbnZtZS5oICAgICAg
IHwgMTE0ICsrKysrKysrKysrKysrKysrLQogNiBmaWxlcyBjaGFuZ2VkLCA0NzMgaW5zZXJ0aW9u
cygrKSwgMTUgZGVsZXRpb25zKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9udm1lL2hv
c3Qvem5zLmMKCmRpZmYgLS1naXQgYS9ibG9jay9LY29uZmlnIGIvYmxvY2svS2NvbmZpZwppbmRl
eCA5MzU3ZDczMDIzOTguLmJiYWQ1ZThiYmZmZSAxMDA2NDQKLS0tIGEvYmxvY2svS2NvbmZpZwor
KysgYi9ibG9jay9LY29uZmlnCkBAIC04Niw5ICs4NiwxMCBAQCBjb25maWcgQkxLX0RFVl9aT05F
RAogCXNlbGVjdCBNUV9JT1NDSEVEX0RFQURMSU5FCiAJaGVscAogCUJsb2NrIGxheWVyIHpvbmVk
IGJsb2NrIGRldmljZSBzdXBwb3J0LiBUaGlzIG9wdGlvbiBlbmFibGVzCi0Jc3VwcG9ydCBmb3Ig
WkFDL1pCQyBob3N0LW1hbmFnZWQgYW5kIGhvc3QtYXdhcmUgem9uZWQgYmxvY2sgZGV2aWNlcy4K
KwlzdXBwb3J0IGZvciBaQUMvWkJDL1pOUyBob3N0LW1hbmFnZWQgYW5kIGhvc3QtYXdhcmUgem9u
ZWQgYmxvY2sKKwlkZXZpY2VzLgogCi0JU2F5IHllcyBoZXJlIGlmIHlvdSBoYXZlIGEgWkFDIG9y
IFpCQyBzdG9yYWdlIGRldmljZS4KKwlTYXkgeWVzIGhlcmUgaWYgeW91IGhhdmUgYSBaQUMsIFpC
Qywgb3IgWk5TIHN0b3JhZ2UgZGV2aWNlLgogCiBjb25maWcgQkxLX0RFVl9USFJPVFRMSU5HCiAJ
Ym9vbCAiQmxvY2sgbGF5ZXIgYmlvIHRocm90dGxpbmcgc3VwcG9ydCIKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbnZtZS9ob3N0L01ha2VmaWxlIGIvZHJpdmVycy9udm1lL2hvc3QvTWFrZWZpbGUKaW5k
ZXggZmM3YjI2YmU2OTJkLi5kN2Y2YTg3Njg3YjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbnZtZS9o
b3N0L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvbnZtZS9ob3N0L01ha2VmaWxlCkBAIC0xMyw2ICsx
Myw3IEBAIG52bWUtY29yZS15CQkJCTo9IGNvcmUubwogbnZtZS1jb3JlLSQoQ09ORklHX1RSQUNJ
TkcpCQkrPSB0cmFjZS5vCiBudm1lLWNvcmUtJChDT05GSUdfTlZNRV9NVUxUSVBBVEgpCSs9IG11
bHRpcGF0aC5vCiBudm1lLWNvcmUtJChDT05GSUdfTlZNKQkJCSs9IGxpZ2h0bnZtLm8KK252bWUt
Y29yZS0kKENPTkZJR19CTEtfREVWX1pPTkVEKQkrPSB6bnMubwogbnZtZS1jb3JlLSQoQ09ORklH
X0ZBVUxUX0lOSkVDVElPTl9ERUJVR19GUykJKz0gZmF1bHRfaW5qZWN0Lm8KIG52bWUtY29yZS0k
KENPTkZJR19OVk1FX0hXTU9OKQkJKz0gaHdtb24ubwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL252
bWUvaG9zdC9jb3JlLmMgYi9kcml2ZXJzL252bWUvaG9zdC9jb3JlLmMKaW5kZXggNjRiN2I5ZmMy
ODE3Li44ODVkYjU2MWRlMTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbnZtZS9ob3N0L2NvcmUuYwor
KysgYi9kcml2ZXJzL252bWUvaG9zdC9jb3JlLmMKQEAgLTg5LDcgKzg5LDcgQEAgc3RhdGljIGRl
dl90IG52bWVfY2hyX2RldnQ7CiBzdGF0aWMgc3RydWN0IGNsYXNzICpudm1lX2NsYXNzOwogc3Rh
dGljIHN0cnVjdCBjbGFzcyAqbnZtZV9zdWJzeXNfY2xhc3M7CiAKLXN0YXRpYyBpbnQgbnZtZV9y
ZXZhbGlkYXRlX2Rpc2soc3RydWN0IGdlbmRpc2sgKmRpc2spOworc3RhdGljIGludCBfbnZtZV9y
ZXZhbGlkYXRlX2Rpc2soc3RydWN0IGdlbmRpc2sgKmRpc2spOwogc3RhdGljIHZvaWQgbnZtZV9w
dXRfc3Vic3lzdGVtKHN0cnVjdCBudm1lX3N1YnN5c3RlbSAqc3Vic3lzKTsKIHN0YXRpYyB2b2lk
IG52bWVfcmVtb3ZlX2ludmFsaWRfbmFtZXNwYWNlcyhzdHJ1Y3QgbnZtZV9jdHJsICpjdHJsLAog
CQkJCQkgICB1bnNpZ25lZCBuc2lkKTsKQEAgLTI4Nyw2ICsyODcsMTAgQEAgdm9pZCBudm1lX2Nv
bXBsZXRlX3JxKHN0cnVjdCByZXF1ZXN0ICpyZXEpCiAJCQludm1lX3JldHJ5X3JlcShyZXEpOwog
CQkJcmV0dXJuOwogCQl9CisJfSBlbHNlIGlmIChJU19FTkFCTEVEKENPTkZJR19CTEtfREVWX1pP
TkVEKSAmJgorCQkgICByZXFfb3AocmVxKSA9PSBSRVFfT1BfWk9ORV9BUFBFTkQpIHsKKwkJcmVx
LT5fX3NlY3RvciA9IG52bWVfbGJhX3RvX3NlY3QocmVxLT5xLT5xdWV1ZWRhdGEsCisJCQlsZTY0
X3RvX2NwdShudm1lX3JlcShyZXEpLT5yZXN1bHQudTY0KSk7CiAJfQogCiAJbnZtZV90cmFjZV9i
aW9fY29tcGxldGUocmVxLCBzdGF0dXMpOwpAQCAtNjczLDcgKzY3Nyw4IEBAIHN0YXRpYyBpbmxp
bmUgYmxrX3N0YXR1c190IG52bWVfc2V0dXBfd3JpdGVfemVyb2VzKHN0cnVjdCBudm1lX25zICpu
cywKIH0KIAogc3RhdGljIGlubGluZSBibGtfc3RhdHVzX3QgbnZtZV9zZXR1cF9ydyhzdHJ1Y3Qg
bnZtZV9ucyAqbnMsCi0JCXN0cnVjdCByZXF1ZXN0ICpyZXEsIHN0cnVjdCBudm1lX2NvbW1hbmQg
KmNtbmQpCisJCXN0cnVjdCByZXF1ZXN0ICpyZXEsIHN0cnVjdCBudm1lX2NvbW1hbmQgKmNtbmQs
CisJCWVudW0gbnZtZV9vcGNvZGUgb3ApCiB7CiAJc3RydWN0IG52bWVfY3RybCAqY3RybCA9IG5z
LT5jdHJsOwogCXUxNiBjb250cm9sID0gMDsKQEAgLTY4Nyw3ICs2OTIsNyBAQCBzdGF0aWMgaW5s
aW5lIGJsa19zdGF0dXNfdCBudm1lX3NldHVwX3J3KHN0cnVjdCBudm1lX25zICpucywKIAlpZiAo
cmVxLT5jbWRfZmxhZ3MgJiBSRVFfUkFIRUFEKQogCQlkc21nbXQgfD0gTlZNRV9SV19EU01fRlJF
UV9QUkVGRVRDSDsKIAotCWNtbmQtPnJ3Lm9wY29kZSA9IChycV9kYXRhX2RpcihyZXEpID8gbnZt
ZV9jbWRfd3JpdGUgOiBudm1lX2NtZF9yZWFkKTsKKwljbW5kLT5ydy5vcGNvZGUgPSBvcDsKIAlj
bW5kLT5ydy5uc2lkID0gY3B1X3RvX2xlMzIobnMtPmhlYWQtPm5zX2lkKTsKIAljbW5kLT5ydy5z
bGJhID0gY3B1X3RvX2xlNjQobnZtZV9zZWN0X3RvX2xiYShucywgYmxrX3JxX3BvcyhyZXEpKSk7
CiAJY21uZC0+cncubGVuZ3RoID0gY3B1X3RvX2xlMTYoKGJsa19ycV9ieXRlcyhyZXEpID4+IG5z
LT5sYmFfc2hpZnQpIC0gMSk7CkBAIC03MTYsNiArNzIxLDggQEAgc3RhdGljIGlubGluZSBibGtf
c3RhdHVzX3QgbnZtZV9zZXR1cF9ydyhzdHJ1Y3QgbnZtZV9ucyAqbnMsCiAJCWNhc2UgTlZNRV9O
U19EUFNfUElfVFlQRTI6CiAJCQljb250cm9sIHw9IE5WTUVfUldfUFJJTkZPX1BSQ0hLX0dVQVJE
IHwKIAkJCQkJTlZNRV9SV19QUklORk9fUFJDSEtfUkVGOworCQkJaWYgKG9wID09IG52bWVfY21k
X3pvbmVfYXBwZW5kKQorCQkJCWNvbnRyb2wgfD0gTlZNRV9SV19BUFBFTkRfUElSRU1BUDsKIAkJ
CWNtbmQtPnJ3LnJlZnRhZyA9IGNwdV90b19sZTMyKHQxMF9waV9yZWZfdGFnKHJlcSkpOwogCQkJ
YnJlYWs7CiAJCX0KQEAgLTc1Niw2ICs3NjMsMTkgQEAgYmxrX3N0YXR1c190IG52bWVfc2V0dXBf
Y21kKHN0cnVjdCBudm1lX25zICpucywgc3RydWN0IHJlcXVlc3QgKnJlcSwKIAljYXNlIFJFUV9P
UF9GTFVTSDoKIAkJbnZtZV9zZXR1cF9mbHVzaChucywgY21kKTsKIAkJYnJlYWs7CisJY2FzZSBS
RVFfT1BfWk9ORV9SRVNFVF9BTEw6CisJY2FzZSBSRVFfT1BfWk9ORV9SRVNFVDoKKwkJcmV0ID0g
bnZtZV9zZXR1cF96b25lX21nbXRfc2VuZChucywgcmVxLCBjbWQsIE5WTUVfWk9ORV9SRVNFVCk7
CisJCWJyZWFrOworCWNhc2UgUkVRX09QX1pPTkVfT1BFTjoKKwkJcmV0ID0gbnZtZV9zZXR1cF96
b25lX21nbXRfc2VuZChucywgcmVxLCBjbWQsIE5WTUVfWk9ORV9PUEVOKTsKKwkJYnJlYWs7CisJ
Y2FzZSBSRVFfT1BfWk9ORV9DTE9TRToKKwkJcmV0ID0gbnZtZV9zZXR1cF96b25lX21nbXRfc2Vu
ZChucywgcmVxLCBjbWQsIE5WTUVfWk9ORV9DTE9TRSk7CisJCWJyZWFrOworCWNhc2UgUkVRX09Q
X1pPTkVfRklOSVNIOgorCQlyZXQgPSBudm1lX3NldHVwX3pvbmVfbWdtdF9zZW5kKG5zLCByZXEs
IGNtZCwgTlZNRV9aT05FX0ZJTklTSCk7CisJCWJyZWFrOwogCWNhc2UgUkVRX09QX1dSSVRFX1pF
Uk9FUzoKIAkJcmV0ID0gbnZtZV9zZXR1cF93cml0ZV96ZXJvZXMobnMsIHJlcSwgY21kKTsKIAkJ
YnJlYWs7CkBAIC03NjMsOCArNzgzLDEzIEBAIGJsa19zdGF0dXNfdCBudm1lX3NldHVwX2NtZChz
dHJ1Y3QgbnZtZV9ucyAqbnMsIHN0cnVjdCByZXF1ZXN0ICpyZXEsCiAJCXJldCA9IG52bWVfc2V0
dXBfZGlzY2FyZChucywgcmVxLCBjbWQpOwogCQlicmVhazsKIAljYXNlIFJFUV9PUF9SRUFEOgor
CQlyZXQgPSBudm1lX3NldHVwX3J3KG5zLCByZXEsIGNtZCwgbnZtZV9jbWRfcmVhZCk7CisJCWJy
ZWFrOwogCWNhc2UgUkVRX09QX1dSSVRFOgotCQlyZXQgPSBudm1lX3NldHVwX3J3KG5zLCByZXEs
IGNtZCk7CisJCXJldCA9IG52bWVfc2V0dXBfcncobnMsIHJlcSwgY21kLCBudm1lX2NtZF93cml0
ZSk7CisJCWJyZWFrOworCWNhc2UgUkVRX09QX1pPTkVfQVBQRU5EOgorCQlyZXQgPSBudm1lX3Nl
dHVwX3J3KG5zLCByZXEsIGNtZCwgbnZtZV9jbWRfem9uZV9hcHBlbmQpOwogCQlicmVhazsKIAlk
ZWZhdWx0OgogCQlXQVJOX09OX09OQ0UoMSk7CkBAIC0xMzkxLDE0ICsxNDE2LDIzIEBAIHN0YXRp
YyB1MzIgbnZtZV9wYXNzdGhydV9zdGFydChzdHJ1Y3QgbnZtZV9jdHJsICpjdHJsLCBzdHJ1Y3Qg
bnZtZV9ucyAqbnMsCiAJcmV0dXJuIGVmZmVjdHM7CiB9CiAKLXN0YXRpYyB2b2lkIG52bWVfdXBk
YXRlX2Zvcm1hdHMoc3RydWN0IG52bWVfY3RybCAqY3RybCkKK3N0YXRpYyB2b2lkIG52bWVfdXBk
YXRlX2Zvcm1hdHMoc3RydWN0IG52bWVfY3RybCAqY3RybCwgdTMyICplZmZlY3RzKQogewogCXN0
cnVjdCBudm1lX25zICpuczsKIAogCWRvd25fcmVhZCgmY3RybC0+bmFtZXNwYWNlc19yd3NlbSk7
CiAJbGlzdF9mb3JfZWFjaF9lbnRyeShucywgJmN0cmwtPm5hbWVzcGFjZXMsIGxpc3QpCi0JCWlm
IChucy0+ZGlzayAmJiBudm1lX3JldmFsaWRhdGVfZGlzayhucy0+ZGlzaykpCisJCWlmIChucy0+
ZGlzayAmJiBfbnZtZV9yZXZhbGlkYXRlX2Rpc2sobnMtPmRpc2spKQogCQkJbnZtZV9zZXRfcXVl
dWVfZHlpbmcobnMpOworCQllbHNlIGlmIChibGtfcXVldWVfaXNfem9uZWQobnMtPmRpc2stPnF1
ZXVlKSkgeworCQkJLyoKKwkJCSAqIElPIGNvbW1hbmRzIGFyZSByZXF1aXJlZCB0byBmdWxseSBy
ZXZhbGlkYXRlIGEgem9uZWQKKwkJCSAqIGRldmljZS4gRm9yY2UgdGhlIGNvbW1hbmQgZWZmZWN0
cyB0byB0cmlnZ2VyIHJlc2NhbgorCQkJICogd29yayBzbyByZXBvcnQgem9uZXMgY2FuIHJ1biBp
biBhIGNvbnRleHQgd2l0aAorCQkJICogdW5mcm96ZW4gSU8gcXVldWVzLgorCQkJICovCisJCQkq
ZWZmZWN0cyB8PSBOVk1FX0NNRF9FRkZFQ1RTX05DQzsKKwkJfQogCXVwX3JlYWQoJmN0cmwtPm5h
bWVzcGFjZXNfcndzZW0pOwogfQogCkBAIC0xNDEwLDcgKzE0NDQsNyBAQCBzdGF0aWMgdm9pZCBu
dm1lX3Bhc3N0aHJ1X2VuZChzdHJ1Y3QgbnZtZV9jdHJsICpjdHJsLCB1MzIgZWZmZWN0cykKIAkg
KiB0aGlzIGNvbW1hbmQuCiAJICovCiAJaWYgKGVmZmVjdHMgJiBOVk1FX0NNRF9FRkZFQ1RTX0xC
Q0MpCi0JCW52bWVfdXBkYXRlX2Zvcm1hdHMoY3RybCk7CisJCW52bWVfdXBkYXRlX2Zvcm1hdHMo
Y3RybCwgJmVmZmVjdHMpOwogCWlmIChlZmZlY3RzICYgKE5WTUVfQ01EX0VGRkVDVFNfTEJDQyB8
IE5WTUVfQ01EX0VGRkVDVFNfQ1NFX01BU0spKSB7CiAJCW52bWVfdW5mcmVlemUoY3RybCk7CiAJ
CW52bWVfbXBhdGhfdW5mcmVlemUoY3RybC0+c3Vic3lzKTsKQEAgLTE1MjUsNyArMTU1OSw3IEBA
IHN0YXRpYyBpbnQgbnZtZV91c2VyX2NtZDY0KHN0cnVjdCBudm1lX2N0cmwgKmN0cmwsIHN0cnVj
dCBudm1lX25zICpucywKICAqIElzc3VlIGlvY3RsIHJlcXVlc3RzIG9uIHRoZSBmaXJzdCBhdmFp
bGFibGUgcGF0aC4gIE5vdGUgdGhhdCB1bmxpa2Ugbm9ybWFsCiAgKiBibG9jayBsYXllciByZXF1
ZXN0cyB3ZSB3aWxsIG5vdCByZXRyeSBmYWlsZWQgcmVxdWVzdCBvbiBhbm90aGVyIGNvbnRyb2xs
ZXIuCiAgKi8KLXN0YXRpYyBzdHJ1Y3QgbnZtZV9ucyAqbnZtZV9nZXRfbnNfZnJvbV9kaXNrKHN0
cnVjdCBnZW5kaXNrICpkaXNrLAorc3RydWN0IG52bWVfbnMgKm52bWVfZ2V0X25zX2Zyb21fZGlz
ayhzdHJ1Y3QgZ2VuZGlzayAqZGlzaywKIAkJc3RydWN0IG52bWVfbnNfaGVhZCAqKmhlYWQsIGlu
dCAqc3JjdV9pZHgpCiB7CiAjaWZkZWYgQ09ORklHX05WTUVfTVVMVElQQVRICkBAIC0xNTQ1LDcg
KzE1NzksNyBAQCBzdGF0aWMgc3RydWN0IG52bWVfbnMgKm52bWVfZ2V0X25zX2Zyb21fZGlzayhz
dHJ1Y3QgZ2VuZGlzayAqZGlzaywKIAlyZXR1cm4gZGlzay0+cHJpdmF0ZV9kYXRhOwogfQogCi1z
dGF0aWMgdm9pZCBudm1lX3B1dF9uc19mcm9tX2Rpc2soc3RydWN0IG52bWVfbnNfaGVhZCAqaGVh
ZCwgaW50IGlkeCkKK3ZvaWQgbnZtZV9wdXRfbnNfZnJvbV9kaXNrKHN0cnVjdCBudm1lX25zX2hl
YWQgKmhlYWQsIGludCBpZHgpCiB7CiAJaWYgKGhlYWQpCiAJCXNyY3VfcmVhZF91bmxvY2soJmhl
YWQtPnNyY3UsIGlkeCk7CkBAIC0xOTM4LDIxICsxOTcyLDI4IEBAIHN0YXRpYyB2b2lkIG52bWVf
dXBkYXRlX2Rpc2tfaW5mbyhzdHJ1Y3QgZ2VuZGlzayAqZGlzaywKIAogc3RhdGljIGludCBfX252
bWVfcmV2YWxpZGF0ZV9kaXNrKHN0cnVjdCBnZW5kaXNrICpkaXNrLCBzdHJ1Y3QgbnZtZV9pZF9u
cyAqaWQpCiB7CisJdW5zaWduZWQgbGJhZiA9IGlkLT5mbGJhcyAmIE5WTUVfTlNfRkxCQVNfTEJB
X01BU0s7CiAJc3RydWN0IG52bWVfbnMgKm5zID0gZGlzay0+cHJpdmF0ZV9kYXRhOwogCXN0cnVj
dCBudm1lX2N0cmwgKmN0cmwgPSBucy0+Y3RybDsKKwlpbnQgcmV0OwogCXUzMiBpb2I7CiAKIAkv
KgogCSAqIElmIGlkZW50aWZ5IG5hbWVzcGFjZSBmYWlsZWQsIHVzZSBkZWZhdWx0IDUxMiBieXRl
IGJsb2NrIHNpemUgc28KIAkgKiBibG9jayBsYXllciBjYW4gdXNlIGJlZm9yZSBmYWlsaW5nIHJl
YWQvd3JpdGUgZm9yIDAgY2FwYWNpdHkuCiAJICovCi0JbnMtPmxiYV9zaGlmdCA9IGlkLT5sYmFm
W2lkLT5mbGJhcyAmIE5WTUVfTlNfRkxCQVNfTEJBX01BU0tdLmRzOworCW5zLT5sYmFfc2hpZnQg
PSBpZC0+bGJhZltsYmFmXS5kczsKIAlpZiAobnMtPmxiYV9zaGlmdCA9PSAwKQogCQlucy0+bGJh
X3NoaWZ0ID0gOTsKIAogCXN3aXRjaCAobnMtPmhlYWQtPmlkcy5jc2kpIHsKIAljYXNlIE5WTUVf
Q1NJX05WTToKIAkJYnJlYWs7CisJY2FzZSBOVk1FX0NTSV9aTlM6CisJCXJldCA9IG52bWVfdXBk
YXRlX3pvbmVfaW5mbyhkaXNrLCBucywgbGJhZik7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0
OworCQlicmVhazsKIAlkZWZhdWx0OgogCQlkZXZfd2FybihjdHJsLT5kZXZpY2UsICJ1bmtub3du
IGNzaTolZCBuczolZFxuIiwKIAkJCW5zLT5oZWFkLT5pZHMuY3NpLCBucy0+aGVhZC0+bnNfaWQp
OwpAQCAtMTk2Niw3ICsyMDA3LDcgQEAgc3RhdGljIGludCBfX252bWVfcmV2YWxpZGF0ZV9kaXNr
KHN0cnVjdCBnZW5kaXNrICpkaXNrLCBzdHJ1Y3QgbnZtZV9pZF9ucyAqaWQpCiAJCWlvYiA9IG52
bWVfbGJhX3RvX3NlY3QobnMsIGxlMTZfdG9fY3B1KGlkLT5ub2lvYikpOwogCiAJbnMtPmZlYXR1
cmVzID0gMDsKLQlucy0+bXMgPSBsZTE2X3RvX2NwdShpZC0+bGJhZltpZC0+ZmxiYXMgJiBOVk1F
X05TX0ZMQkFTX0xCQV9NQVNLXS5tcyk7CisJbnMtPm1zID0gbGUxNl90b19jcHUoaWQtPmxiYWZb
bGJhZl0ubXMpOwogCS8qIHRoZSBQSSBpbXBsZW1lbnRhdGlvbiByZXF1aXJlcyBtZXRhZGF0YSBl
cXVhbCB0MTAgcGkgdHVwbGUgc2l6ZSAqLwogCWlmIChucy0+bXMgPT0gc2l6ZW9mKHN0cnVjdCB0
MTBfcGlfdHVwbGUpKQogCQlucy0+cGlfdHlwZSA9IGlkLT5kcHMgJiBOVk1FX05TX0RQU19QSV9N
QVNLOwpAQCAtMjAwOSw3ICsyMDUwLDcgQEAgc3RhdGljIGludCBfX252bWVfcmV2YWxpZGF0ZV9k
aXNrKHN0cnVjdCBnZW5kaXNrICpkaXNrLCBzdHJ1Y3QgbnZtZV9pZF9ucyAqaWQpCiAJcmV0dXJu
IDA7CiB9CiAKLXN0YXRpYyBpbnQgbnZtZV9yZXZhbGlkYXRlX2Rpc2soc3RydWN0IGdlbmRpc2sg
KmRpc2spCitzdGF0aWMgaW50IF9udm1lX3JldmFsaWRhdGVfZGlzayhzdHJ1Y3QgZ2VuZGlzayAq
ZGlzaykKIHsKIAlzdHJ1Y3QgbnZtZV9ucyAqbnMgPSBkaXNrLT5wcml2YXRlX2RhdGE7CiAJc3Ry
dWN0IG52bWVfY3RybCAqY3RybCA9IG5zLT5jdHJsOwpAQCAtMjA1Nyw2ICsyMDk4LDI4IEBAIHN0
YXRpYyBpbnQgbnZtZV9yZXZhbGlkYXRlX2Rpc2soc3RydWN0IGdlbmRpc2sgKmRpc2spCiAJcmV0
dXJuIHJldDsKIH0KIAorc3RhdGljIGludCBudm1lX3JldmFsaWRhdGVfZGlzayhzdHJ1Y3QgZ2Vu
ZGlzayAqZGlzaykKK3sKKwlpbnQgcmV0OworCisJcmV0ID0gX252bWVfcmV2YWxpZGF0ZV9kaXNr
KGRpc2spOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKyNpZmRlZiBDT05GSUdfQkxLX0RF
Vl9aT05FRAorCWlmIChibGtfcXVldWVfaXNfem9uZWQoZGlzay0+cXVldWUpKSB7CisJCXN0cnVj
dCBudm1lX25zICpucyA9IGRpc2stPnByaXZhdGVfZGF0YTsKKwkJc3RydWN0IG52bWVfY3RybCAq
Y3RybCA9IG5zLT5jdHJsOworCisJCXJldCA9IGJsa19yZXZhbGlkYXRlX2Rpc2tfem9uZXMoZGlz
aywgTlVMTCk7CisJCWlmICghcmV0KQorCQkJYmxrX3F1ZXVlX21heF96b25lX2FwcGVuZF9zZWN0
b3JzKGRpc2stPnF1ZXVlLAorCQkJCQkJCSAgY3RybC0+bWF4X3pvbmVfYXBwZW5kKTsKKwl9Cisj
ZW5kaWYKKwlyZXR1cm4gcmV0OworfQorCiBzdGF0aWMgY2hhciBudm1lX3ByX3R5cGUoZW51bSBw
cl90eXBlIHR5cGUpCiB7CiAJc3dpdGNoICh0eXBlKSB7CkBAIC0yMTg3LDYgKzIyNTAsNyBAQCBz
dGF0aWMgY29uc3Qgc3RydWN0IGJsb2NrX2RldmljZV9vcGVyYXRpb25zIG52bWVfZm9wcyA9IHsK
IAkucmVsZWFzZQk9IG52bWVfcmVsZWFzZSwKIAkuZ2V0Z2VvCQk9IG52bWVfZ2V0Z2VvLAogCS5y
ZXZhbGlkYXRlX2Rpc2s9IG52bWVfcmV2YWxpZGF0ZV9kaXNrLAorCS5yZXBvcnRfem9uZXMJPSBu
dm1lX3JlcG9ydF96b25lcywKIAkucHJfb3BzCQk9ICZudm1lX3ByX29wcywKIH07CiAKQEAgLTIy
MTIsNiArMjI3Niw3IEBAIGNvbnN0IHN0cnVjdCBibG9ja19kZXZpY2Vfb3BlcmF0aW9ucyBudm1l
X25zX2hlYWRfb3BzID0gewogCS5pb2N0bAkJPSBudm1lX2lvY3RsLAogCS5jb21wYXRfaW9jdGwJ
PSBudm1lX2NvbXBhdF9pb2N0bCwKIAkuZ2V0Z2VvCQk9IG52bWVfZ2V0Z2VvLAorCS5yZXBvcnRf
em9uZXMJPSBudm1lX3JlcG9ydF96b25lcywKIAkucHJfb3BzCQk9ICZudm1lX3ByX29wcywKIH07
CiAjZW5kaWYgLyogQ09ORklHX05WTUVfTVVMVElQQVRIICovCkBAIC00NDM5LDYgKzQ1MDQsOCBA
QCBzdGF0aWMgaW5saW5lIHZvaWQgX252bWVfY2hlY2tfc2l6ZSh2b2lkKQogCUJVSUxEX0JVR19P
TihzaXplb2Yoc3RydWN0IG52bWVfY29tbWFuZCkgIT0gNjQpOwogCUJVSUxEX0JVR19PTihzaXpl
b2Yoc3RydWN0IG52bWVfaWRfY3RybCkgIT0gTlZNRV9JREVOVElGWV9EQVRBX1NJWkUpOwogCUJV
SUxEX0JVR19PTihzaXplb2Yoc3RydWN0IG52bWVfaWRfbnMpICE9IE5WTUVfSURFTlRJRllfREFU
QV9TSVpFKTsKKwlCVUlMRF9CVUdfT04oc2l6ZW9mKHN0cnVjdCBudm1lX2lkX25zX3pucykgIT0g
TlZNRV9JREVOVElGWV9EQVRBX1NJWkUpOworCUJVSUxEX0JVR19PTihzaXplb2Yoc3RydWN0IG52
bWVfaWRfY3RybF96bnMpICE9IE5WTUVfSURFTlRJRllfREFUQV9TSVpFKTsKIAlCVUlMRF9CVUdf
T04oc2l6ZW9mKHN0cnVjdCBudm1lX2xiYV9yYW5nZV90eXBlKSAhPSA2NCk7CiAJQlVJTERfQlVH
X09OKHNpemVvZihzdHJ1Y3QgbnZtZV9zbWFydF9sb2cpICE9IDUxMik7CiAJQlVJTERfQlVHX09O
KHNpemVvZihzdHJ1Y3QgbnZtZV9kYmJ1ZikgIT0gNjQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
dm1lL2hvc3QvbnZtZS5oIGIvZHJpdmVycy9udm1lL2hvc3QvbnZtZS5oCmluZGV4IDU4NDI4ZTNh
NTkwZS4uNjYyZjk1ZmJkOTA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL252bWUvaG9zdC9udm1lLmgK
KysrIGIvZHJpdmVycy9udm1lL2hvc3QvbnZtZS5oCkBAIC0yMzksNiArMjM5LDkgQEAgc3RydWN0
IG52bWVfY3RybCB7CiAJdTMyIG1heF9od19zZWN0b3JzOwogCXUzMiBtYXhfc2VnbWVudHM7CiAJ
dTMyIG1heF9pbnRlZ3JpdHlfc2VnbWVudHM7CisjaWZkZWYgQ09ORklHX0JMS19ERVZfWk9ORUQK
Kwl1MzIgbWF4X3pvbmVfYXBwZW5kOworI2VuZGlmCiAJdTE2IGNyZHRbM107CiAJdTE2IG9uY3M7
CiAJdTE2IG9hY3M7CkBAIC00MDMsNiArNDA2LDkgQEAgc3RydWN0IG52bWVfbnMgewogCXUxNiBz
Z3M7CiAJdTMyIHN3czsKIAl1OCBwaV90eXBlOworI2lmZGVmIENPTkZJR19CTEtfREVWX1pPTkVE
CisJdTY0IHpzemU7CisjZW5kaWYKIAl1bnNpZ25lZCBsb25nIGZlYXR1cmVzOwogCXVuc2lnbmVk
IGxvbmcgZmxhZ3M7CiAjZGVmaW5lIE5WTUVfTlNfUkVNT1ZJTkcJMApAQCAtNTY4LDYgKzU3NCw5
IEBAIGludCBudm1lX2RlbGV0ZV9jdHJsKHN0cnVjdCBudm1lX2N0cmwgKmN0cmwpOwogCiBpbnQg
bnZtZV9nZXRfbG9nKHN0cnVjdCBudm1lX2N0cmwgKmN0cmwsIHUzMiBuc2lkLCB1OCBsb2dfcGFn
ZSwgdTggbHNwLCB1OCBjc2ksCiAJCXZvaWQgKmxvZywgc2l6ZV90IHNpemUsIHU2NCBvZmZzZXQp
Oworc3RydWN0IG52bWVfbnMgKm52bWVfZ2V0X25zX2Zyb21fZGlzayhzdHJ1Y3QgZ2VuZGlzayAq
ZGlzaywKKwkJc3RydWN0IG52bWVfbnNfaGVhZCAqKmhlYWQsIGludCAqc3JjdV9pZHgpOwordm9p
ZCBudm1lX3B1dF9uc19mcm9tX2Rpc2soc3RydWN0IG52bWVfbnNfaGVhZCAqaGVhZCwgaW50IGlk
eCk7CiAKIGV4dGVybiBjb25zdCBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICpudm1lX25zX2lkX2F0
dHJfZ3JvdXBzW107CiBleHRlcm4gY29uc3Qgc3RydWN0IGJsb2NrX2RldmljZV9vcGVyYXRpb25z
IG52bWVfbnNfaGVhZF9vcHM7CkBAIC02ODksNiArNjk4LDM2IEBAIHN0YXRpYyBpbmxpbmUgdm9p
ZCBudm1lX21wYXRoX3N0YXJ0X2ZyZWV6ZShzdHJ1Y3QgbnZtZV9zdWJzeXN0ZW0gKnN1YnN5cykK
IH0KICNlbmRpZiAvKiBDT05GSUdfTlZNRV9NVUxUSVBBVEggKi8KIAorI2lmZGVmIENPTkZJR19C
TEtfREVWX1pPTkVECitpbnQgbnZtZV91cGRhdGVfem9uZV9pbmZvKHN0cnVjdCBnZW5kaXNrICpk
aXNrLCBzdHJ1Y3QgbnZtZV9ucyAqbnMsCisJCQkgIHVuc2lnbmVkIGxiYWYpOworCitpbnQgbnZt
ZV9yZXBvcnRfem9uZXMoc3RydWN0IGdlbmRpc2sgKmRpc2ssIHNlY3Rvcl90IHNlY3RvciwKKwkJ
ICAgICAgdW5zaWduZWQgaW50IG5yX3pvbmVzLCByZXBvcnRfem9uZXNfY2IgY2IsIHZvaWQgKmRh
dGEpOworCitibGtfc3RhdHVzX3QgbnZtZV9zZXR1cF96b25lX21nbXRfc2VuZChzdHJ1Y3QgbnZt
ZV9ucyAqbnMsIHN0cnVjdCByZXF1ZXN0ICpyZXEsCisJCQkJICAgICAgIHN0cnVjdCBudm1lX2Nv
bW1hbmQgKmNtbmQsCisJCQkJICAgICAgIGVudW0gbnZtZV96b25lX21nbXRfYWN0aW9uIGFjdGlv
bik7CisjZWxzZQorI2RlZmluZSBudm1lX3JlcG9ydF96b25lcyBOVUxMCisKK3N0YXRpYyBpbmxp
bmUgYmxrX3N0YXR1c190IG52bWVfc2V0dXBfem9uZV9tZ210X3NlbmQoc3RydWN0IG52bWVfbnMg
Km5zLAorCQlzdHJ1Y3QgcmVxdWVzdCAqcmVxLCBzdHJ1Y3QgbnZtZV9jb21tYW5kICpjbW5kLAor
CQllbnVtIG52bWVfem9uZV9tZ210X2FjdGlvbiBhY3Rpb24pCit7CisJcmV0dXJuIEJMS19TVFNf
Tk9UU1VQUDsKK30KKworc3RhdGljIGlubGluZSBpbnQgbnZtZV91cGRhdGVfem9uZV9pbmZvKHN0
cnVjdCBnZW5kaXNrICpkaXNrLAorCQkJCQlzdHJ1Y3QgbnZtZV9ucyAqbnMsCisJCQkJCXVuc2ln
bmVkIGxiYWYpCit7CisJZGV2X3dhcm4obnMtPmN0cmwtPmRldmljZSwKKwkJICJQbGVhc2UgZW5h
YmxlIENPTkZJR19CTEtfREVWX1pPTkVEIHRvIHN1cHBvcnQgWk5TIGRldmljZXNcbiIpOworCXJl
dHVybiAtRVBST1RPTk9TVVBQT1JUOworfQorI2VuZGlmCisKICNpZmRlZiBDT05GSUdfTlZNCiBp
bnQgbnZtZV9udm1fcmVnaXN0ZXIoc3RydWN0IG52bWVfbnMgKm5zLCBjaGFyICpkaXNrX25hbWUs
IGludCBub2RlKTsKIHZvaWQgbnZtZV9udm1fdW5yZWdpc3RlcihzdHJ1Y3QgbnZtZV9ucyAqbnMp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9udm1lL2hvc3Qvem5zLmMgYi9kcml2ZXJzL252bWUvaG9z
dC96bnMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmQ1N2ZiYmZl
MTVlOAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvbnZtZS9ob3N0L3pucy5jCkBAIC0wLDAg
KzEsMjM4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAorLyoKKyAqIENv
cHlyaWdodCAoQykgMjAyMCBXZXN0ZXJuIERpZ2l0YWwgQ29ycG9yYXRpb24gb3IgaXRzIGFmZmls
aWF0ZXMuCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2Jsa2Rldi5oPgorI2luY2x1ZGUgPGxpbnV4
L3ZtYWxsb2MuaD4KKyNpbmNsdWRlICJudm1lLmgiCisKK3N0YXRpYyBpbnQgbnZtZV9zZXRfbWF4
X2FwcGVuZChzdHJ1Y3QgbnZtZV9jdHJsICpjdHJsKQoreworCXN0cnVjdCBudm1lX2NvbW1hbmQg
YyA9IHsgfTsKKwlzdHJ1Y3QgbnZtZV9pZF9jdHJsX3pucyAqaWQ7CisJaW50IHN0YXR1czsKKwor
CWlkID0ga3phbGxvYyhzaXplb2YoKmlkKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFpZCkKKwkJcmV0
dXJuIC1FTk9NRU07CisKKwljLmlkZW50aWZ5Lm9wY29kZSA9IG52bWVfYWRtaW5faWRlbnRpZnk7
CisJYy5pZGVudGlmeS5jbnMgPSBOVk1FX0lEX0NOU19DU19DVFJMOworCWMuaWRlbnRpZnkuY3Np
ID0gTlZNRV9DU0lfWk5TOworCisJc3RhdHVzID0gbnZtZV9zdWJtaXRfc3luY19jbWQoY3RybC0+
YWRtaW5fcSwgJmMsIGlkLCBzaXplb2YoKmlkKSk7CisJaWYgKHN0YXR1cykgeworCQlrZnJlZShp
ZCk7CisJCXJldHVybiBzdGF0dXM7CisJfQorCisJY3RybC0+bWF4X3pvbmVfYXBwZW5kID0gMSA8
PCAoaWQtPnphbWRzICsgMyk7CisJa2ZyZWUoaWQpOworCXJldHVybiAwOworfQorCitpbnQgbnZt
ZV91cGRhdGVfem9uZV9pbmZvKHN0cnVjdCBnZW5kaXNrICpkaXNrLCBzdHJ1Y3QgbnZtZV9ucyAq
bnMsCisJCQkgIHVuc2lnbmVkIGxiYWYpCit7CisJc3RydWN0IG52bWVfZWZmZWN0c19sb2cgKmxv
ZyA9IG5zLT5oZWFkLT5lZmZlY3RzOworCXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0gZGlzay0+
cXVldWU7CisJc3RydWN0IG52bWVfY29tbWFuZCBjID0geyB9OworCXN0cnVjdCBudm1lX2lkX25z
X3pucyAqaWQ7CisJaW50IHN0YXR1czsKKworCS8qIERyaXZlciByZXF1aXJlcyB6b25lIGFwcGVu
ZCBzdXBwb3J0ICovCisJaWYgKCEobG9nLT5pb2NzW252bWVfY21kX3pvbmVfYXBwZW5kXSAmIE5W
TUVfQ01EX0VGRkVDVFNfQ1NVUFApKQorCQlyZXR1cm4gLUVOT0RFVjsKKworCS8qIExhemlseSBx
dWVyeSBjb250cm9sbGVyIGFwcGVuZCBsaW1pdCBmb3IgdGhlIGZpcnN0IHpvbmVkIG5hbWVzcGFj
ZSAqLworCWlmICghbnMtPmN0cmwtPm1heF96b25lX2FwcGVuZCkgeworCQlzdGF0dXMgPSBudm1l
X3NldF9tYXhfYXBwZW5kKG5zLT5jdHJsKTsKKwkJaWYgKHN0YXR1cykKKwkJCXJldHVybiBzdGF0
dXM7CisJfQorCisJaWQgPSBremFsbG9jKHNpemVvZigqaWQpLCBHRlBfS0VSTkVMKTsKKwlpZiAo
IWlkKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWMuaWRlbnRpZnkub3Bjb2RlID0gbnZtZV9hZG1p
bl9pZGVudGlmeTsKKwljLmlkZW50aWZ5Lm5zaWQgPSBjcHVfdG9fbGUzMihucy0+aGVhZC0+bnNf
aWQpOworCWMuaWRlbnRpZnkuY25zID0gTlZNRV9JRF9DTlNfQ1NfTlM7CisJYy5pZGVudGlmeS5j
c2kgPSBOVk1FX0NTSV9aTlM7CisKKwlzdGF0dXMgPSBudm1lX3N1Ym1pdF9zeW5jX2NtZChucy0+
Y3RybC0+YWRtaW5fcSwgJmMsIGlkLCBzaXplb2YoKmlkKSk7CisJaWYgKHN0YXR1cykKKwkJZ290
byBmcmVlX2RhdGE7CisKKwkvKgorCSAqIFdlIGN1cnJlbnRseSBkbyBub3QgaGFuZGxlIGRldmlj
ZXMgcmVxdWlyaW5nIGFueSBvZiB0aGUgem9uZWQKKwkgKiBvcGVyYXRpb24gY2hhcmFjdGVyaXN0
aWNzLgorCSAqLworCWlmIChpZC0+em9jKSB7CisJCXN0YXR1cyA9IC1FSU5WQUw7CisJCWdvdG8g
ZnJlZV9kYXRhOworCX0KKworCW5zLT56c3plID0gbnZtZV9sYmFfdG9fc2VjdChucywgbGU2NF90
b19jcHUoaWQtPmxiYWZlW2xiYWZdLnpzemUpKTsKKwlpZiAoIW5zLT56c3plKSB7CisJCXN0YXR1
cyA9IC1FSU5WQUw7CisJCWdvdG8gZnJlZV9kYXRhOworCX0KKworCXEtPmxpbWl0cy56b25lZCA9
IEJMS19aT05FRF9ITTsKKwlibGtfcXVldWVfZmxhZ19zZXQoUVVFVUVfRkxBR19aT05FX1JFU0VU
QUxMLCBxKTsKK2ZyZWVfZGF0YToKKwlrZnJlZShpZCk7CisJcmV0dXJuIHN0YXR1czsKK30KKwor
c3RhdGljIHZvaWQgKm52bWVfem5zX2FsbG9jX3JlcG9ydF9idWZmZXIoc3RydWN0IG52bWVfbnMg
Km5zLAorCQkJCQkgIHVuc2lnbmVkIGludCBucl96b25lcywgc2l6ZV90ICpidWZsZW4pCit7CisJ
c3RydWN0IHJlcXVlc3RfcXVldWUgKnEgPSBucy0+ZGlzay0+cXVldWU7CisJc2l6ZV90IGJ1ZnNp
emU7CisJdm9pZCAqYnVmOworCisJY29uc3Qgc2l6ZV90IG1pbl9idWZzaXplID0gc2l6ZW9mKHN0
cnVjdCBudm1lX3pvbmVfcmVwb3J0KSArCisJCQkJICAgc2l6ZW9mKHN0cnVjdCBudm1lX3pvbmVf
ZGVzY3JpcHRvcik7CisKKwlucl96b25lcyA9IG1pbl90KHVuc2lnbmVkIGludCwgbnJfem9uZXMs
CisJCQkgZ2V0X2NhcGFjaXR5KG5zLT5kaXNrKSA+PiBpbG9nMihucy0+enN6ZSkpOworCisJYnVm
c2l6ZSA9IHNpemVvZihzdHJ1Y3QgbnZtZV96b25lX3JlcG9ydCkgKworCQlucl96b25lcyAqIHNp
emVvZihzdHJ1Y3QgbnZtZV96b25lX2Rlc2NyaXB0b3IpOworCWJ1ZnNpemUgPSBtaW5fdChzaXpl
X3QsIGJ1ZnNpemUsCisJCQlxdWV1ZV9tYXhfaHdfc2VjdG9ycyhxKSA8PCBTRUNUT1JfU0hJRlQp
OworCWJ1ZnNpemUgPSBtaW5fdChzaXplX3QsIGJ1ZnNpemUsIHF1ZXVlX21heF9zZWdtZW50cyhx
KSA8PCBQQUdFX1NISUZUKTsKKworCXdoaWxlIChidWZzaXplID49IG1pbl9idWZzaXplKSB7CisJ
CWJ1ZiA9IF9fdm1hbGxvYyhidWZzaXplLAorCQkJCUdGUF9LRVJORUwgfCBfX0dGUF9aRVJPIHwg
X19HRlBfTk9SRVRSWSk7CisJCWlmIChidWYpIHsKKwkJCSpidWZsZW4gPSBidWZzaXplOworCQkJ
cmV0dXJuIGJ1ZjsKKwkJfQorCQlidWZzaXplID4+PSAxOworCX0KKwlyZXR1cm4gTlVMTDsKK30K
Kworc3RhdGljIGludCBfX252bWVfbnNfcmVwb3J0X3pvbmVzKHN0cnVjdCBudm1lX25zICpucywg
c2VjdG9yX3Qgc2VjdG9yLAorCQkJCSAgc3RydWN0IG52bWVfem9uZV9yZXBvcnQgKnJlcG9ydCwK
KwkJCQkgIHNpemVfdCBidWZsZW4pCit7CisJc3RydWN0IG52bWVfY29tbWFuZCBjID0geyB9Owor
CWludCByZXQ7CisKKwljLnptci5vcGNvZGUgPSBudm1lX2NtZF96b25lX21nbXRfcmVjdjsKKwlj
Lnptci5uc2lkID0gY3B1X3RvX2xlMzIobnMtPmhlYWQtPm5zX2lkKTsKKwljLnptci5zbGJhID0g
Y3B1X3RvX2xlNjQobnZtZV9zZWN0X3RvX2xiYShucywgc2VjdG9yKSk7CisJYy56bXIubnVtZCA9
IGNwdV90b19sZTMyKG52bWVfYnl0ZXNfdG9fbnVtZChidWZsZW4pKTsKKwljLnptci56cmEgPSBO
Vk1FX1pSQV9aT05FX1JFUE9SVDsKKwljLnptci56cmFzZiA9IE5WTUVfWlJBU0ZfWk9ORV9SRVBP
UlRfQUxMOworCWMuem1yLnByID0gTlZNRV9SRVBPUlRfWk9ORV9QQVJUSUFMOworCisJcmV0ID0g
bnZtZV9zdWJtaXRfc3luY19jbWQobnMtPnF1ZXVlLCAmYywgcmVwb3J0LCBidWZsZW4pOworCWlm
IChyZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXR1cm4gbGU2NF90b19jcHUocmVwb3J0LT5ucl96
b25lcyk7Cit9CisKK3N0YXRpYyBpbnQgbnZtZV96b25lX3BhcnNlX2VudHJ5KHN0cnVjdCBudm1l
X25zICpucywKKwkJCQkgc3RydWN0IG52bWVfem9uZV9kZXNjcmlwdG9yICplbnRyeSwKKwkJCQkg
dW5zaWduZWQgaW50IGlkeCwgcmVwb3J0X3pvbmVzX2NiIGNiLAorCQkJCSB2b2lkICpkYXRhKQor
eworCXN0cnVjdCBibGtfem9uZSB6b25lID0geyB9OworCisJaWYgKChlbnRyeS0+enQgJiAweGYp
ICE9IE5WTUVfWk9ORV9UWVBFX1NFUVdSSVRFX1JFUSkgeworCQlkZXZfZXJyKG5zLT5jdHJsLT5k
ZXZpY2UsICJpbnZhbGlkIHpvbmUgdHlwZSAlI3hcbiIsCisJCQkJZW50cnktPnp0KTsKKwkJcmV0
dXJuIC1FSU5WQUw7CisJfQorCisJem9uZS50eXBlID0gQkxLX1pPTkVfVFlQRV9TRVFXUklURV9S
RVE7CisJem9uZS5jb25kID0gZW50cnktPnpzID4+IDQ7CisJem9uZS5sZW4gPSBucy0+enN6ZTsK
Kwl6b25lLmNhcGFjaXR5ID0gbnZtZV9sYmFfdG9fc2VjdChucywgbGU2NF90b19jcHUoZW50cnkt
PnpjYXApKTsKKwl6b25lLnN0YXJ0ID0gbnZtZV9sYmFfdG9fc2VjdChucywgbGU2NF90b19jcHUo
ZW50cnktPnpzbGJhKSk7CisJem9uZS53cCA9IG52bWVfbGJhX3RvX3NlY3QobnMsIGxlNjRfdG9f
Y3B1KGVudHJ5LT53cCkpOworCisJcmV0dXJuIGNiKCZ6b25lLCBpZHgsIGRhdGEpOworfQorCitz
dGF0aWMgaW50IG52bWVfbnNfcmVwb3J0X3pvbmVzKHN0cnVjdCBudm1lX25zICpucywgc2VjdG9y
X3Qgc2VjdG9yLAorCQkJdW5zaWduZWQgaW50IG5yX3pvbmVzLCByZXBvcnRfem9uZXNfY2IgY2Is
IHZvaWQgKmRhdGEpCit7CisJc3RydWN0IG52bWVfem9uZV9yZXBvcnQgKnJlcG9ydDsKKwlpbnQg
cmV0LCB6b25lX2lkeCA9IDA7CisJdW5zaWduZWQgaW50IG56LCBpOworCXNpemVfdCBidWZsZW47
CisKKwlyZXBvcnQgPSBudm1lX3puc19hbGxvY19yZXBvcnRfYnVmZmVyKG5zLCBucl96b25lcywg
JmJ1Zmxlbik7CisJaWYgKCFyZXBvcnQpCisJCXJldHVybiAtRU5PTUVNOworCisJc2VjdG9yICY9
IH4obnMtPnpzemUgLSAxKTsKKwl3aGlsZSAoem9uZV9pZHggPCBucl96b25lcyAmJiBzZWN0b3Ig
PCBnZXRfY2FwYWNpdHkobnMtPmRpc2spKSB7CisJCW1lbXNldChyZXBvcnQsIDAsIGJ1Zmxlbik7
CisJCXJldCA9IF9fbnZtZV9uc19yZXBvcnRfem9uZXMobnMsIHNlY3RvciwgcmVwb3J0LCBidWZs
ZW4pOworCQlpZiAocmV0IDwgMCkKKwkJCWdvdG8gb3V0X2ZyZWU7CisKKwkJbnogPSBtaW5fdCh1
bnNpZ25lZCBpbnQsIHJldCwgbnJfem9uZXMpOworCQlpZiAoIW56KQorCQkJYnJlYWs7CisKKwkJ
Zm9yIChpID0gMDsgaSA8IG56ICYmIHpvbmVfaWR4IDwgbnJfem9uZXM7IGkrKykgeworCQkJcmV0
ID0gbnZtZV96b25lX3BhcnNlX2VudHJ5KG5zLCAmcmVwb3J0LT5lbnRyaWVzW2ldLAorCQkJCQkJ
ICAgIHpvbmVfaWR4LCBjYiwgZGF0YSk7CisJCQlpZiAocmV0KQorCQkJCWdvdG8gb3V0X2ZyZWU7
CisJCQl6b25lX2lkeCsrOworCQl9CisKKwkJc2VjdG9yICs9IG5zLT56c3plICogbno7CisJfQor
CisJcmV0ID0gem9uZV9pZHg7CitvdXRfZnJlZToKKwlrdmZyZWUocmVwb3J0KTsKKwlyZXR1cm4g
cmV0OworfQorCitpbnQgbnZtZV9yZXBvcnRfem9uZXMoc3RydWN0IGdlbmRpc2sgKmRpc2ssIHNl
Y3Rvcl90IHNlY3RvciwKKwkJICAgICAgdW5zaWduZWQgaW50IG5yX3pvbmVzLCByZXBvcnRfem9u
ZXNfY2IgY2IsIHZvaWQgKmRhdGEpCit7CisJc3RydWN0IG52bWVfbnNfaGVhZCAqaGVhZCA9IE5V
TEw7CisJc3RydWN0IG52bWVfbnMgKm5zOworCWludCBzcmN1X2lkeCwgcmV0OworCisJbnMgPSBu
dm1lX2dldF9uc19mcm9tX2Rpc2soZGlzaywgJmhlYWQsICZzcmN1X2lkeCk7CisJaWYgKHVubGlr
ZWx5KCFucykpCisJCXJldHVybiAtRVdPVUxEQkxPQ0s7CisKKwlpZiAobnMtPmhlYWQtPmlkcy5j
c2kgPT0gTlZNRV9DU0lfWk5TKQorCQlyZXQgPSBudm1lX25zX3JlcG9ydF96b25lcyhucywgc2Vj
dG9yLCBucl96b25lcywgY2IsIGRhdGEpOworCWVsc2UKKwkJcmV0ID0gLUVJTlZBTDsKKwludm1l
X3B1dF9uc19mcm9tX2Rpc2soaGVhZCwgc3JjdV9pZHgpOworCisJcmV0dXJuIHJldDsKK30KKwor
YmxrX3N0YXR1c190IG52bWVfc2V0dXBfem9uZV9tZ210X3NlbmQoc3RydWN0IG52bWVfbnMgKm5z
LCBzdHJ1Y3QgcmVxdWVzdCAqcmVxLAorCQlzdHJ1Y3QgbnZtZV9jb21tYW5kICpjLCBlbnVtIG52
bWVfem9uZV9tZ210X2FjdGlvbiBhY3Rpb24pCit7CisJYy0+em1zLm9wY29kZSA9IG52bWVfY21k
X3pvbmVfbWdtdF9zZW5kOworCWMtPnptcy5uc2lkID0gY3B1X3RvX2xlMzIobnMtPmhlYWQtPm5z
X2lkKTsKKwljLT56bXMuc2xiYSA9IGNwdV90b19sZTY0KG52bWVfc2VjdF90b19sYmEobnMsIGJs
a19ycV9wb3MocmVxKSkpOworCWMtPnptcy56c2EgPSBhY3Rpb247CisKKwlpZiAocmVxX29wKHJl
cSkgPT0gUkVRX09QX1pPTkVfUkVTRVRfQUxMKQorCQljLT56bXMuc2VsZWN0X2FsbCA9IDE7CisK
KwlyZXR1cm4gQkxLX1NUU19PSzsKK30KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbnZtZS5o
IGIvaW5jbHVkZS9saW51eC9udm1lLmgKaW5kZXggOTVjZDAzZTI0MGExLi5kODYyZTVkNzA4MTgg
MTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvbnZtZS5oCisrKyBiL2luY2x1ZGUvbGludXgvbnZt
ZS5oCkBAIC0xLDYgKzEsNyBAQAogLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAg
Ki8KIC8qCi0gKiBEZWZpbml0aW9ucyBmb3IgdGhlIE5WTSBFeHByZXNzIGludGVyZmFjZQorICog
RGVmaW5pdGlvbnMgZm9yIHRoZSBOVk0gRXgKKyAqIHJlc3MgaW50ZXJmYWNlCiAgKiBDb3B5cmln
aHQgKGMpIDIwMTEtMjAxNCwgSW50ZWwgQ29ycG9yYXRpb24uCiAgKi8KIApAQCAtMzc0LDYgKzM3
NSwzMCBAQCBzdHJ1Y3QgbnZtZV9pZF9ucyB7CiAJX191OAkJCXZzWzM3MTJdOwogfTsKIAorc3Ry
dWN0IG52bWVfem5zX2xiYWZlIHsKKwlfX2xlNjQJCQl6c3plOworCV9fdTgJCQl6ZGVzOworCV9f
dTgJCQlyc3ZkOVs3XTsKK307CisKK3N0cnVjdCBudm1lX2lkX25zX3pucyB7CisJX19sZTE2CQkJ
em9jOworCV9fbGUxNgkJCW96Y3M7CisJX19sZTMyCQkJbWFyOworCV9fbGUzMgkJCW1vcjsKKwlf
X2xlMzIJCQlycmw7CisJX19sZTMyCQkJZnJsOworCV9fdTgJCQlyc3ZkMjBbMjc5Nl07CisJc3Ry
dWN0IG52bWVfem5zX2xiYWZlCWxiYWZlWzE2XTsKKwlfX3U4CQkJcnN2ZDMwNzJbNzY4XTsKKwlf
X3U4CQkJdnNbMjU2XTsKK307CisKK3N0cnVjdCBudm1lX2lkX2N0cmxfem5zIHsKKwlfX3U4CXph
bWRzOworCV9fdTgJcnN2ZDFbNDA5NV07Cit9OworCiBlbnVtIHsKIAlOVk1FX0lEX0NOU19OUwkJ
CT0gMHgwMCwKIAlOVk1FX0lEX0NOU19DVFJMCQk9IDB4MDEsCkBAIC0zOTIsNiArNDE3LDcgQEAg
ZW51bSB7CiAKIGVudW0gewogCU5WTUVfQ1NJX05WTQkJCT0gMCwKKwlOVk1FX0NTSV9aTlMJCQk9
IDIsCiB9OwogCiBlbnVtIHsKQEAgLTUzMiw2ICs1NTgsMjcgQEAgc3RydWN0IG52bWVfYW5hX3Jz
cF9oZHIgewogCV9fbGUxNglyc3ZkMTBbM107CiB9OwogCitzdHJ1Y3QgbnZtZV96b25lX2Rlc2Ny
aXB0b3IgeworCV9fdTgJCXp0OworCV9fdTgJCXpzOworCV9fdTgJCXphOworCV9fdTgJCXJzdmQz
WzVdOworCV9fbGU2NAkJemNhcDsKKwlfX2xlNjQJCXpzbGJhOworCV9fbGU2NAkJd3A7CisJX191
OAkJcnN2ZDMyWzMyXTsKK307CisKK2VudW0geworCU5WTUVfWk9ORV9UWVBFX1NFUVdSSVRFX1JF
UQk9IDB4MiwKK307CisKK3N0cnVjdCBudm1lX3pvbmVfcmVwb3J0IHsKKwlfX2xlNjQJCW5yX3pv
bmVzOworCV9fdTgJCXJlc3Y4WzU2XTsKKwlzdHJ1Y3QgbnZtZV96b25lX2Rlc2NyaXB0b3IgZW50
cmllc1tdOworfTsKKwogZW51bSB7CiAJTlZNRV9TTUFSVF9DUklUX1NQQVJFCQk9IDEgPDwgMCwK
IAlOVk1FX1NNQVJUX0NSSVRfVEVNUEVSQVRVUkUJPSAxIDw8IDEsCkBAIC02MjYsNiArNjczLDkg
QEAgZW51bSBudm1lX29wY29kZSB7CiAJbnZtZV9jbWRfcmVzdl9yZXBvcnQJPSAweDBlLAogCW52
bWVfY21kX3Jlc3ZfYWNxdWlyZQk9IDB4MTEsCiAJbnZtZV9jbWRfcmVzdl9yZWxlYXNlCT0gMHgx
NSwKKwludm1lX2NtZF96b25lX21nbXRfc2VuZAk9IDB4NzksCisJbnZtZV9jbWRfem9uZV9tZ210
X3JlY3YJPSAweDdhLAorCW52bWVfY21kX3pvbmVfYXBwZW5kCT0gMHg3ZCwKIH07CiAKICNkZWZp
bmUgbnZtZV9vcGNvZGVfbmFtZShvcGNvZGUpCXsgb3Bjb2RlLCAjb3Bjb2RlIH0KQEAgLTc2NCw2
ICs4MTQsNyBAQCBzdHJ1Y3QgbnZtZV9yd19jb21tYW5kIHsKIGVudW0gewogCU5WTUVfUldfTFIJ
CQk9IDEgPDwgMTUsCiAJTlZNRV9SV19GVUEJCQk9IDEgPDwgMTQsCisJTlZNRV9SV19BUFBFTkRf
UElSRU1BUAkJPSAxIDw8IDksCiAJTlZNRV9SV19EU01fRlJFUV9VTlNQRUMJCT0gMCwKIAlOVk1F
X1JXX0RTTV9GUkVRX1RZUElDQUwJPSAxLAogCU5WTUVfUldfRFNNX0ZSRVFfUkFSRQkJPSAyLApA
QCAtODI5LDYgKzg4MCw1MyBAQCBzdHJ1Y3QgbnZtZV93cml0ZV96ZXJvZXNfY21kIHsKIAlfX2xl
MTYJCQlhcHBtYXNrOwogfTsKIAorZW51bSBudm1lX3pvbmVfbWdtdF9hY3Rpb24geworCU5WTUVf
Wk9ORV9DTE9TRQkJPSAweDEsCisJTlZNRV9aT05FX0ZJTklTSAk9IDB4MiwKKwlOVk1FX1pPTkVf
T1BFTgkJPSAweDMsCisJTlZNRV9aT05FX1JFU0VUCQk9IDB4NCwKKwlOVk1FX1pPTkVfT0ZGTElO
RQk9IDB4NSwKKwlOVk1FX1pPTkVfU0VUX0RFU0NfRVhUCT0gMHgxMCwKK307CisKK3N0cnVjdCBu
dm1lX3pvbmVfbWdtdF9zZW5kX2NtZCB7CisJX191OAkJCW9wY29kZTsKKwlfX3U4CQkJZmxhZ3M7
CisJX191MTYJCQljb21tYW5kX2lkOworCV9fbGUzMgkJCW5zaWQ7CisJX19sZTMyCQkJY2R3Mlsy
XTsKKwlfX2xlNjQJCQltZXRhZGF0YTsKKwl1bmlvbiBudm1lX2RhdGFfcHRyCWRwdHI7CisJX19s
ZTY0CQkJc2xiYTsKKwlfX2xlMzIJCQljZHcxMjsKKwlfX3U4CQkJenNhOworCV9fdTgJCQlzZWxl
Y3RfYWxsOworCV9fdTgJCQlyc3ZkMTNbMl07CisJX19sZTMyCQkJY2R3MTRbMl07Cit9OworCitz
dHJ1Y3QgbnZtZV96b25lX21nbXRfcmVjdl9jbWQgeworCV9fdTgJCQlvcGNvZGU7CisJX191OAkJ
CWZsYWdzOworCV9fdTE2CQkJY29tbWFuZF9pZDsKKwlfX2xlMzIJCQluc2lkOworCV9fbGU2NAkJ
CXJzdmQyWzJdOworCXVuaW9uIG52bWVfZGF0YV9wdHIJZHB0cjsKKwlfX2xlNjQJCQlzbGJhOwor
CV9fbGUzMgkJCW51bWQ7CisJX191OAkJCXpyYTsKKwlfX3U4CQkJenJhc2Y7CisJX191OAkJCXBy
OworCV9fdTgJCQlyc3ZkMTM7CisJX19sZTMyCQkJY2R3MTRbMl07Cit9OworCitlbnVtIHsKKwlO
Vk1FX1pSQV9aT05FX1JFUE9SVAkJPSAwLAorCU5WTUVfWlJBU0ZfWk9ORV9SRVBPUlRfQUxMCT0g
MCwKKwlOVk1FX1JFUE9SVF9aT05FX1BBUlRJQUwJPSAxLAorfTsKKwogLyogRmVhdHVyZXMgKi8K
IAogZW51bSB7CkBAIC0xMzAwLDYgKzEzOTgsOCBAQCBzdHJ1Y3QgbnZtZV9jb21tYW5kIHsKIAkJ
c3RydWN0IG52bWVfZm9ybWF0X2NtZCBmb3JtYXQ7CiAJCXN0cnVjdCBudm1lX2RzbV9jbWQgZHNt
OwogCQlzdHJ1Y3QgbnZtZV93cml0ZV96ZXJvZXNfY21kIHdyaXRlX3plcm9lczsKKwkJc3RydWN0
IG52bWVfem9uZV9tZ210X3NlbmRfY21kIHptczsKKwkJc3RydWN0IG52bWVfem9uZV9tZ210X3Jl
Y3ZfY21kIHptcjsKIAkJc3RydWN0IG52bWVfYWJvcnRfY21kIGFib3J0OwogCQlzdHJ1Y3QgbnZt
ZV9nZXRfbG9nX3BhZ2VfY29tbWFuZCBnZXRfbG9nX3BhZ2U7CiAJCXN0cnVjdCBudm1mX2NvbW1v
bl9jb21tYW5kIGZhYnJpY3M7CkBAIC0xNDMzLDYgKzE1MzMsMTggQEAgZW51bSB7CiAJTlZNRV9T
Q19ESVNDT1ZFUllfUkVTVEFSVAk9IDB4MTkwLAogCU5WTUVfU0NfQVVUSF9SRVFVSVJFRAkJPSAw
eDE5MSwKIAorCS8qCisJICogSS9PIENvbW1hbmQgU2V0IFNwZWNpZmljIC0gWm9uZWQgY29tbWFu
ZHM6CisJICovCisJTlZNRV9TQ19aT05FX0JPVU5EQVJZX0VSUk9SCT0gMHgxYjgsCisJTlZNRV9T
Q19aT05FX0ZVTEwJCT0gMHgxYjksCisJTlZNRV9TQ19aT05FX1JFQURfT05MWQkJPSAweDFiYSwK
KwlOVk1FX1NDX1pPTkVfT0ZGTElORQkJPSAweDFiYiwKKwlOVk1FX1NDX1pPTkVfSU5WQUxJRF9X
UklURQk9IDB4MWJjLAorCU5WTUVfU0NfWk9ORV9UT09fTUFOWV9BQ1RJVkUJPSAweDFiZCwKKwlO
Vk1FX1NDX1pPTkVfVE9PX01BTllfT1BFTgk9IDB4MWJlLAorCU5WTUVfU0NfWk9ORV9JTlZBTElE
X1RSQU5TSVRJT04JPSAweDFiZiwKKwogCS8qCiAJICogTWVkaWEgYW5kIERhdGEgSW50ZWdyaXR5
IEVycm9yczoKIAkgKi8KLS0gCjIuMjQuMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmxpbnV4LW52bWUgbWFpbGluZyBsaXN0CmxpbnV4LW52bWVAbGlz
dHMuaW5mcmFkZWFkLm9yZwpodHRwOi8vbGlzdHMuaW5mcmFkZWFkLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2xpbnV4LW52bWUK
